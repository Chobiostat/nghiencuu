<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Y tế Công cộng - Ước lượng cỡ mẫu so sánh hai tỷ lệ</title>
  <link rel="shortcut icon" href="/assets/images/favicon.ico">
  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="alternate" type="application/rss+xml" title="My Blog" href="/feed.xml">
  <link rel="stylesheet" href="/assets/css/highlight.css">
</head>
<body>

  <nav class="main-nav">
    
        <a href="/"> <span class="arrow">←</span>&#x2302; </a>
    

    <!--  -->
        <a href="http://stats.ytecongcong.com">? </a>
    <!--  -->
    <!-- 
        <a href="/about">? </a>
     -->
    
        <a href="/search">&#128270; </a>
    
    
        <a href="/archive">&#x2245; </a>
    
    <a href="/feed.xml">&#9829;</a>
    <!-- <a class="cta" href="/feed.xml">&#9829;</a> -->
</nav>


  

  <section id="wrapper" class="">
    <article class="post">
    <header>
        <h1>Ước lượng cỡ mẫu so sánh hai tỷ lệ</h1>
        <h2 class="headline">May 13, 2013</h2>
    </header>
    <section id="post-body">
        <h2>Nghiên cứu hai mẫu</h2>
<p>Trong thiết kế nghiên cứu có hai nhóm, thường một nhóm sẽ có vai trò là nhóm chứng/nhóm chuẩn... với nhóm còn lại là nhóm điều trị/phương pháp pháp mới... cần so sánh. Trong v.d. sau đây, nhà nghiên cứu mong đợi phương pháp mới (có tỷ lệ thành công là p1) sẽ cao hơn phương pháp cũ (có tỷ lệ thành công là p2) 5%.</p>
<p>Công thức sau dựa trên phiên bản tối ưu hóa của <em>J. T. Casagrande [1]</em> dựa trên 3 công thức đề nghị trước đây gồm:</p>
<ol>
<li>công thức "arcsin" của Cochran và Cox (1957),</li>
<li>công thức của Fleiss (1973),</li>
<li>và công thức hiệu chỉnh chi bình phương của Kramer và Greenhouse (1959).</li>
</ol>
<p>Mục đích của các ước lượng cỡ mẫu khác nhau là mong tìm được cỡ mẫu nhỏ nhất nhưng đảm bảo giữ nguyên năng lực của nghiên cứu.</p>
<p>Công thức ước lượng cỡ mẫu <strong>CHO MỖI NHÓM</strong> được tính như sau:</p>
<p style="text-align: center;">[latex] n_1 = n_2 = \dfrac{A \left[ 1 + \sqrt{1+ \dfrac{4 (p_1-p_2)}{A}}\right]^2}{4(p_1-p_2)^2} [/latex]</p>
<p>Với</p>
<p style="text-align: center;">[latex]A = \left[Z_{1-\alpha}\sqrt{2\bar{p}\bar{q}} + Z_{\beta} \sqrt{p_1q_1+p_2q_2}\right]^2[/latex]</p>
<p style="text-align: left;">Trong đó</p>
<p style="text-align: center;">[latex]\bar{p} = (p_1 + p_2)/2 [/latex]</p>
<p style="text-align: center;">[latex]\bar{q} = 1 - \bar{p} [/latex]</p>
<p>Code R để tính cỡ mẫu trên, cũng như so với các cỡ mẫu tính từ công thức của Cochran,Fleiss và Krammer-Greenhouse như sau:</p>
<pre class="top-margin:24 toolbar:2 lang:r decode:true crayon-selected">####Thay số thích hợp cho nghiên cứu, ví dụ p1=0.5, p2=0.55, alpha, beta  phù hợp với nghiên cứu

p1 = 0.55
p2 = 0.5
alpha = 0.05
beta = 0.2   #hay năng lực 80%

####Tính các biến số cần thiết

p_bar = (p1+p2)/2 #trung bình tỷ lệ 2 nhóm
q_bar = 1-p_bar
q1 = 1-p1
q2 = 1-p2
power = 1-beta #năng lực

###Tính A

A = (qnorm(1-alpha)*sqrt(2*p_bar*q_bar) + qnorm(power)*sqrt(p1*q1+p2*q2))^2

###Cỡ mẫu MỖI nhóm

samplesize = round((A*(1+sqrt(1+4*abs(p1-p2)/A))^2)/(4*(p1-p2)^2),0)
samplesize

###So sánh với các cỡ mẫu tính từ công thức của Cochran,Fleiss và Krammer-Greenhouse

arcsin = round((qnorm(1-alpha)+qnorm(power))^2/(2*(asin(sqrt(p1))-asin(sqrt(p2)))^2))

fleiss = round((qnorm(1-alpha)*sqrt(2*p_bar*q_bar) + qnorm(power)*sqrt(p1*q1+p2*q2))^2/abs(p1-p2)^2)

krammergreenhouse = round(A*(1+ sqrt(1+8*abs(p1-p2)/A))^2/(4*(p1-p2)^2))

arcsin;fleiss;krammergreenhouse;samplesize</pre>
<p>&nbsp;</p>
<h3 style="text-align: left;">Tài liệu tham khảo:</h3>
<ol>
<li>
<address>An Improved Approximate Formula for Calculating Sample Sizes for Comparing Two Binomial Distributions J. T. Casagrande; M. C. Pike; P. G. Smith Biometrics, Vol. 34, No. 3. (Sep., 1978), pp. 483-486</address>
</li>
</ol>

    </section>
</article>
<footer id="post-meta" class="clearfix">
    <a href="http://twitter.com/">
        <img class="avatar" src="/assets/images/avatar.png">
        <div>
            <span class="dark">Y tế Công cộng</span>
            <span>Gieo sức khỏe - Gặt niềm tin</span>
        </div>
    </a>

    <section id="sharing">
        <a class="twitter" href="https://twitter.com/intent/tweet?text=www.ytecongcong.com/2013/tinh-co-mau-nghien-cuu/ - Ước lượng cỡ mẫu so sánh hai tỷ lệ by @"><span class="icon-twitter"> Tweet</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>
    </section>
</footer>

<!-- Disqus comments -->

    <div class="archive readmore">
        <h3>Comments</h3>
        <section class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'ytecongcong';
        var disqus_developer = 0; // developer mode is on
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>
    </div>


<!-- Archive post list -->


  </section>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="/assets/js/main.js"></script>
  <script src="/assets/js/highlight.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-83930831-1', 'auto');
    ga('send', 'pageview');
  </script>
  <!-- <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
</body>
</html>
